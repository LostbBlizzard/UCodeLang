main.yml
xcode-build:
   runs-on: macOS-latest

   steps:
    - uses: actions/checkout@v3
    
    - name: Make a scripts executable
      run: |
       chmod +x ./XCode.sh
       chmod +x ./BuildTools/BuildMacOS32Debug.sh
       chmod +x ./BuildTools/BuildMacOS64Debug.sh
       chmod +x ./BuildTools/RunTestsMacOS32Debug.sh
       chmod +x ./BuildTools/RunTestsMacOS64Debug.sh

    - name: Run Premake
      run: ./XCode.sh

    - name: Restore cached objs
      id: cache-objs-restore
      uses: actions/cache/restore@v3
      with:
        path: ./Output
        key: ${{ runner.os }}-1

    - name: Build 
      run: ./BuildTools/RunTestsMacOSDebug.sh

    - name: Save cached Objs
      id: cache-Objs-save
      uses: actions/cache/save@v3
      with:
        path: ./Output
        key: ${{ steps.cache-objs-restore.outputs.cache-primary-key }}

    - name: RunTests for 64 bit
      run: ./BuildTools/RunTestsMacOSDebug.sh

Deployment.yml

build-MacOS:
    runs-on: macOS-latest 
   
    steps:
      - uses: actions/checkout@v3

      - name: Restore cached objs
        id: cache-objs-restore
        uses: actions/cache/restore@v3
        with:
          path: ./Output
          key: ${{ runner.os }}-macOS-deployment

      - name: Build
        run:  echo "Do Build Here"

      - name: Save cached Objs
        id: cache-Objs-save
        uses: actions/cache/save@v3
        with:
          path: ./Output
          key: ${{ steps.cache-objs-restore.outputs.cache-primary-key }}

      - name: Archive Output
        uses: actions/upload-artifact@v3
        with:
          name: Output_MacOS
          path: Output/
